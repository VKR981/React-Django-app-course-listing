(this["webpackJsonpproduct-stepping"]=this["webpackJsonpproduct-stepping"]||[]).push([[0],{188:function(e,t,n){e.exports=n(336)},322:function(e,t,n){},336:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),o=n.n(c),u=(n(193),n(21)),s=n(351),l=n(346),i=n(10),m=n(59),p=n.n(m),d=n(108),f=n(11),E=n.n(f),h=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"Setlogintrue",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){var t=e().loginstate.token,n={headers:{"Content-Type":"application/json"}};return t&&(n.headers.Authorization="Token ".concat(t)),n},g=n(8);function b(){var e=Object(g.f)(),t=Object(i.b)(),n=Object(i.c)((function(e){return e.loginstate.state})),c=Object(i.c)((function(e){return e.loginstate.username})),o=Object(a.useState)(""),m=Object(u.a)(o,2),f=m[0];m[1];return r.a.createElement("div",{className:"navbar"},r.a.createElement(s.a,{secondary:!0,inverted:!0},r.a.createElement(s.a.Item,{name:"home",active:"home"===f,onClick:function(){return e.push("/")}}),r.a.createElement(s.a.Item,{name:"post new course",active:"post new course"===f,onClick:function(){return e.push("/post-course")}}),n&&r.a.createElement(s.a.Item,{name:"Welcome,".concat(c)}),r.a.createElement(s.a.Menu,{position:"right"},r.a.createElement(s.a.Item,null,r.a.createElement(l.a,{icon:"search",placeholder:"Search..."})),n&&r.a.createElement(s.a.Item,{name:"logout",active:"logout"===f,onClick:function(){return t(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"Setloginfalse"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),!n&&r.a.createElement(s.a.Item,{name:"login",active:"logout"===f,onClick:function(){return e.push("/login")}}))))}var v=n(350);function j(e){var t=e.title,n=e.from,a=e.desc,c=e.slug,o=Object(g.f)();return r.a.createElement("div",null,r.a.createElement(v.a,{header:t,meta:n,description:a.length>140?a.slice(0,140)+"...":a,onClick:function(e){return o.push("/course/".concat(c))}}))}var y=n(352),C=function(e){return{type:"CREATE_MESSAGE",payload:e}},S=function(e,t){return{type:"GET_ERRORS",payload:{msg:e,status:t}}},k=function(e,t){return{type:"CLEAR_MESSAGE",payload:{msg:e,status:t}}};function w(){var e=Object(i.b)(),t=(Object(i.c)((function(e){return e.Course})),Object(a.useState)([])),n=Object(u.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){E.a.get("http://127.0.0.1:8000/api/v1/course/?format=json").then((function(e){return o(e.data)})),e((function(e){E.a.get("http://127.0.0.1:8000/api/v1/course/?format=json").then((function(t){e({type:"GET_COURSES",payload:t.data})})).catch((function(t){return e(S(t.response.data,t.response.status))}))}))}),[]);return r.a.createElement("div",{className:"content"},r.a.createElement(y.a,{doubling:!0,columns:5},c.map((function(e){return r.a.createElement(y.a.Column,null,r.a.createElement(j,{title:e.title,from:e._from,desc:e.desc,link:e.link,username:e.username,slug:e.slug}))}))))}n(322);var _=n(75),T=n(32),N=n(9),M=n(348),R=n(337);function I(){var e=Object(a.useState)({username:"Visitor",password:"asdfgh",email:"",password2:""}),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)("login"),s=Object(u.a)(o,2),l=s[0],m=s[1],p=Object(i.b)(),d=Object(g.f)(),f=function(e,t){var n=t.name,a=t.value;c((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(T.a)({},n,a))}))};return r.a.createElement("div",{className:"login-form"},"login"===l&&r.a.createElement(M.a,null,r.a.createElement(M.a.Input,{placeholder:"User name",onChange:f,name:"username",value:n.username}),r.a.createElement(M.a.Input,{placeholder:"Password",onChange:f,name:"password",type:"password",value:n.password}),r.a.createElement(R.a,{type:"submit",onClick:function(){var e=n.username,t=n.password,a=JSON.stringify({username:e,password:t});E.a.post("http://127.0.0.1:8000/api/auth/login",a,{headers:{"Content-Type":"application/json"}}).then((function(e){p(h({token:e.data.token,username:e.data.user.username})),localStorage.setItem("token",e.data.token),d.push("/")})).catch((function(e){return alert(JSON.stringify(e.response.data))}))}},"Login"),r.a.createElement(R.a,{type:"submit",onClick:function(){return m("register")}},"Register")),"register"===l&&r.a.createElement(M.a,null,r.a.createElement(M.a.Input,{placeholder:"User name",onChange:f,name:"username"}),r.a.createElement(M.a.Input,{placeholder:"Email",onChange:f,name:"email"}),r.a.createElement(M.a.Input,{placeholder:"Password",onChange:f,name:"password",type:"password"}),r.a.createElement(M.a.Input,{placeholder:"Re-enter password",onChange:f,name:"password2",type:"password"}),r.a.createElement(R.a,{type:"submit",onClick:function(){var e=n.username,t=n.email,a=n.password,r=JSON.stringify({username:e,email:t,password:a});E.a.post("http://127.0.0.1:8000/api/auth/register",r,{headers:{"Content-Type":"application/json"}}).then((function(e){p(h({token:e.data.token,username:e.data.user.username})),localStorage.setItem("token",e.data.token),d.push("/")})).catch((function(e){return alert(JSON.stringify(e.response.data))}))}},"Register"),r.a.createElement(R.a,{type:"submit",onClick:function(){return m("login")}},"Login")))}var D=n(347);function A(){var e=Object(g.f)(),t=Object(i.c)((function(e){return e.Message})),n=Object(i.b)(),c=Object(g.g)().slug,o=Object(a.useState)({title:"",_from:"",desc:"",link:""}),s=Object(u.a)(o,2),m=s[0],p=s[1];Object(a.useEffect)((function(){c&&E.a.get("http://127.0.0.1:8000/api/v1/course/".concat(c,"/?format=json")).then((function(e){return p(e.data)}))}),[]),Object(a.useEffect)((function(){400===t.status?alert(JSON.stringify(t.msg)):(t.postcourse||t.updatecourse)&&(p({title:"",_from:"",desc:"",link:""}),e.push("/")),n(k())}),[t]);var d=function(e,t){var n=t.name,a=t.value;p((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(T.a)({},n,a))}))};return r.a.createElement("div",{className:"new-course-form"},r.a.createElement(M.a,null,r.a.createElement(M.a.Group,{widths:"equal"},r.a.createElement(M.a.Field,{id:"form-input-control-first-name",control:l.a,label:"Course name",placeholder:"Course name",name:"title",onChange:d,value:m.title}),r.a.createElement(M.a.Field,{id:"form-input-control-last-name",control:l.a,label:"From",placeholder:"From",name:"_from",onChange:d,value:m._from})),r.a.createElement(M.a.Field,{id:"form-textarea-control-opinion",control:D.a,label:"Description",placeholder:"Description",name:"desc",onChange:d,value:m.desc}),r.a.createElement(M.a.Field,{id:"form-input-control-error-email",control:l.a,label:"Link",placeholder:"https://",name:"link",onChange:d,value:m.link}),r.a.createElement(M.a.Field,{id:"form-button-control-public",control:R.a,content:"Submit",onClick:function(){var e,t=JSON.stringify(m);if(c)n(function(e,t){return function(n,a){E.a.patch("http://127.0.0.1:8000/api/v1/course/".concat(e,"/"),t,O(a)).then((function(e){n(C({updatecourse:"course updated"})),n({type:"DELETE_COURSE",payload:e.data})})).catch((function(e){return n(S(e.response.data,e.response.status))}))}}(c,t));else{var a=n((e=t,function(t,n){E.a.post("http://127.0.0.1:8000/api/v1/course/",e,O(n)).then((function(e){t(C({postcourse:"course posted"})),t({type:"POST_COURSE",payload:e.data})})).catch((function(e){return t(S(e.response.data,e.response.status))}))}));console.log(a)}}})))}var L=n(349),G=n(353);function U(){var e=Object(g.f)(),t=Object(i.c)((function(e){return e.Comment.comments})),n=Object(i.c)((function(e){return e.loginstate.username})),c=Object(i.c)((function(e){return e.Message})),o=Object(i.b)(),s=Object(a.useState)({review:""}),l=Object(u.a)(s,2),m=l[0],p=l[1],d=Object(g.g)().slug,f=Object(a.useState)({}),h=Object(u.a)(f,2),b=h[0],v=h[1];Object(a.useEffect)((function(){E.a.get("http://127.0.0.1:8000/api/v1/course/".concat(d,"/?format=json")).then((function(e){return v(e.data)})),o(function(e){return function(t){E.a.get("http://127.0.0.1:8000/api/v1/comment/?course=".concat(e,"&format=json")).then((function(e){t({type:"GET_COMMENTS",payload:e.data})})).catch((function(e){return t(S(e.response.data,e.response.status))}))}}(d))}),[]),Object(a.useEffect)((function(){400===c.status?alert(JSON.stringify(c.msg)):c.deletecourse?e.push("/"):p({review:""}),o(k())}),[c]);return r.a.createElement("div",{className:"course-page"},r.a.createElement("h2",null,b.title),r.a.createElement("p",null,b.desc),r.a.createElement(R.a,{onClick:function(){return window.open(b.link,"_blank")},size:"mini"},"Visit"),n===b.username&&r.a.createElement(R.a,{onClick:function(t){return e.push("/edit/".concat(d))},size:"mini"},"Edit"),n===b.username&&r.a.createElement(R.a,{onClick:function(e){return o(function(e){return function(t,n){E.a.delete("http://127.0.0.1:8000/api/v1/course/".concat(e),O(n)).then((function(e){t(C({deletecourse:"course deleted"})),t({type:"DELETE_COURSE",payload:e.data})})).catch((function(e){return t(S(e.response.data,e.response.status))}))}}(d))},size:"mini"},"Delete"),r.a.createElement(L.a.Group,null,r.a.createElement(G.a,{as:"h3"},"Comments"),r.a.createElement(M.a,null,r.a.createElement(M.a.TextArea,{value:m.review,name:"review",onChange:function(e,t){var n=t.name,a=t.value;p((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(T.a)({},n,a))}))}}),r.a.createElement(M.a.Button,{primary:!0,onClick:function(){var e;o((e={comment:m.review,course:b.slug},function(t,n){E.a.post("http://127.0.0.1:8000/api/v1/comment/",e,O(n)).then((function(e){t(C({postcomment:"comment posted"})),t({type:"POST_COMMENT",payload:e.data})})).catch((function(e){return t(S(e.response.data,e.response.status))}))}))}},"Submit")),t.map((function(e){return r.a.createElement(L.a,null,r.a.createElement(L.a.Content,{className:"comment"},r.a.createElement(L.a.Author,{as:"a"},e.username),r.a.createElement(L.a.Metadata,null,r.a.createElement("div",null,new Date(e.datetime).toDateString())),r.a.createElement(L.a.Text,null,e.comment),r.a.createElement(L.a.Actions,null,n===e.username&&r.a.createElement(L.a.Action,{onClick:function(t){var n;o((n=e.id,function(e,t){E.a.delete("http://127.0.0.1:8000/api/v1/comment/".concat(n,"/"),O(t)).then((function(t){e(C({deletecomment:"comment deleted"})),console.log(t.data),e({type:"DELETE_COMMENT",payload:t.data})})).catch((function(t){return e(S(t.response.data,t.response.status))}))}))}},"Delete"))))}))))}var x=function(){var e=Object(i.b)();return Object(a.useEffect)((function(){var t=localStorage.getItem("token"),n={headers:{Authorization:"Token ".concat(t)}};t&&E.a.get("http://127.0.0.1:8000/api/auth/user",n).then((function(n){e(h({token:t,username:n.data.username}))})).catch((function(e){return console.log(e)}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(_.a,null,r.a.createElement(b,null),r.a.createElement(a.Fragment,null,r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:w}),r.a.createElement(g.a,{exact:!0,path:"/login",component:I}),r.a.createElement(g.a,{exact:!0,path:"/post-course",component:A}),r.a.createElement(g.a,{exact:!0,path:"/edit/:slug",component:A}),r.a.createElement(g.a,{exact:!0,path:"/course/:slug",component:U})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(33),F=n(175),P=n(83),z={comments:[]},V={},X=Object(J.c)({loginstate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:!1,token:"",username:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Setlogintrue":return{state:!0,token:t.payload.token,username:t.payload.username};case"Setloginfalse":return localStorage.removeItem("token"),{state:!1,token:"",username:""};default:return e}},Course:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COURSES":return Object(N.a)(Object(N.a)({},e),{},{courses:t.payload});case"DELETE_COURSE":return Object(N.a)(Object(N.a)({},e),{},{courses:e.courses.filter((function(e){return e.id!==t.payload}))});case"POST_COURSE":return Object(N.a)(Object(N.a)({},e),{},{courses:[].concat(Object(P.a)(e.courses),[t.payload])});case"DELETE_COURSE":return Object(N.a)(Object(N.a)({},e),{},{courses:[]});default:return e}},Comment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COMMENTS":return Object(N.a)(Object(N.a)({},e),{},{comments:t.payload});case"DELETE_COMMENT":return Object(N.a)(Object(N.a)({},e),{},{comments:e.comments.filter((function(e){return e.id!==t.payload.id}))});case"POST_COMMENT":return Object(N.a)(Object(N.a)({},e),{},{comments:[].concat(Object(P.a)(e.comments),[t.payload])});case"DELETE_COMMENT":return Object(N.a)(Object(N.a)({},e),{},{comments:[]});default:return e}},Message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MESSAGE":case"GET_ERRORS":return t.payload;case"CLEAR_MESSAGE":return"";default:return e}}}),B=[F.a],W=Object(J.e)(X,{},Object(J.d)(J.a.apply(void 0,B),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:W},r.a.createElement(x,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[188,1,2]]]);
//# sourceMappingURL=main.3998ae3d.chunk.js.map