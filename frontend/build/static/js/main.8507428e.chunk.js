(this["webpackJsonpproduct-stepping"]=this["webpackJsonpproduct-stepping"]||[]).push([[0],{188:function(e,t,n){e.exports=n(336)},322:function(e,t,n){},336:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),c=n.n(o),s=(n(193),n(22)),u=n(351),i=n(346),l=n(10),m=n(60),p=n.n(m),d=n(108),f=n(12),E=n.n(f),h=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"Setlogintrue",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){var t=e().loginstate.token,n={headers:{"Content-Type":"application/json"}};return t&&(n.headers.Authorization="Token ".concat(t)),n},g=n(8);function b(){var e=Object(g.f)(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.loginstate.state})),o=Object(l.c)((function(e){return e.loginstate.username})),c=Object(a.useState)(""),m=Object(s.a)(c,2),f=m[0];m[1];return r.a.createElement("div",{className:"navbar"},r.a.createElement(u.a,{secondary:!0,inverted:!0},r.a.createElement(u.a.Item,{name:"home",active:"home"===f,onClick:function(){return e.push("/")}}),r.a.createElement(u.a.Item,{name:"post new course",active:"post new course"===f,onClick:function(){return e.push("/post-course")}}),n&&r.a.createElement(u.a.Item,{name:"Welcome,".concat(o)}),r.a.createElement(u.a.Menu,{position:"right"},r.a.createElement(u.a.Item,null,r.a.createElement(i.a,{icon:"search",placeholder:"Search..."})),n&&r.a.createElement(u.a.Item,{name:"logout",active:"logout"===f,onClick:function(){return t(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"Setloginfalse"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),!n&&r.a.createElement(u.a.Item,{name:"login",active:"logout"===f,onClick:function(){return e.push("/login")}}))))}var v=n(350);function j(e){var t=e.title,n=e.from,a=e.desc,o=e.slug,c=(e.id,Object(g.f)());return r.a.createElement("div",null,r.a.createElement(v.a,{header:t,meta:n,description:a.length>140?a.slice(0,140)+"...":a,onClick:function(e){return c.push("/course/".concat(o))}}))}var y=n(352);function C(){var e=Object(l.c)((function(e){return e.Course.courses}));return r.a.createElement("div",{className:"content"},r.a.createElement(y.a,{doubling:!0,columns:5},e.map((function(e){return r.a.createElement(y.a.Column,{key:e.id},r.a.createElement(j,{title:e.title,from:e._from,desc:e.desc,link:e.link,username:e.username,slug:e.slug,key:e.id}))}))))}n(322);var S=n(76),w=n(32),k=n(9),_=n(348),T=n(337);function M(){var e=Object(a.useState)({username:"Visitor",password:"asdfgh",email:"",password2:""}),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("login"),u=Object(s.a)(c,2),i=u[0],m=u[1],p=Object(l.b)(),d=Object(g.f)(),f=function(e,t){var n=t.name,a=t.value;o((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},n,a))}))};return r.a.createElement("div",{className:"login-form"},"login"===i&&r.a.createElement(_.a,null,r.a.createElement(_.a.Input,{placeholder:"User name",onChange:f,name:"username",value:n.username}),r.a.createElement(_.a.Input,{placeholder:"Password",onChange:f,name:"password",type:"password",value:n.password}),r.a.createElement(T.a,{type:"submit",onClick:function(){var e=n.username,t=n.password,a=JSON.stringify({username:e,password:t});E.a.post("/api/auth/login",a,{headers:{"Content-Type":"application/json"}}).then((function(e){p(h({token:e.data.token,username:e.data.user.username})),localStorage.setItem("token",e.data.token),d.push("/")})).catch((function(e){return alert(JSON.stringify(e.response.data))}))}},"Login"),r.a.createElement(T.a,{type:"submit",onClick:function(){m("register"),o({username:"",password:"",email:"",password2:""})}},"Register")),"register"===i&&r.a.createElement(_.a,null,r.a.createElement(_.a.Input,{placeholder:"User name",onChange:f,name:"username"}),r.a.createElement(_.a.Input,{placeholder:"Email",onChange:f,name:"email"}),r.a.createElement(_.a.Input,{placeholder:"Password",onChange:f,name:"password",type:"password"}),r.a.createElement(_.a.Input,{placeholder:"Re-enter password",onChange:f,name:"password2",type:"password"}),r.a.createElement(T.a,{type:"submit",onClick:function(){var e=n.username,t=n.email,a=n.password,r=JSON.stringify({username:e,email:t,password:a});if(a!==n.password2)return alert("password do not match"),0;E.a.post("/api/auth/register",r,{headers:{"Content-Type":"application/json"}}).then((function(e){p(h({token:e.data.token,username:e.data.user.username})),localStorage.setItem("token",e.data.token),d.push("/")})).catch((function(e){return alert(JSON.stringify(e.response.data))}))}},"Register"),r.a.createElement(T.a,{type:"submit",onClick:function(){m("login"),o({username:"Visitor",password:"asdfgh",email:"",password2:""})}},"Login")))}var N=n(347),R=function(e){return{type:"CREATE_MESSAGE",payload:e}},I=function(e,t){return{type:"GET_ERRORS",payload:{msg:e,status:t}}},A=function(e,t){return{type:"CLEAR_MESSAGE",payload:{msg:e,status:t}}};function D(){var e=Object(g.f)(),t=Object(l.c)((function(e){return e.Message})),n=Object(l.b)(),o=Object(g.g)().slug,c=Object(a.useState)({title:"",_from:"",desc:"",link:""}),u=Object(s.a)(c,2),m=u[0],p=u[1];Object(a.useEffect)((function(){o&&E.a.get("/api/v1/course/".concat(o,"/?format=json")).then((function(e){return p(e.data)}))}),[]),Object(a.useEffect)((function(){400===t.status?alert(JSON.stringify(t.msg)):(t.postcourse||t.updatecourse)&&(p({title:"",_from:"",desc:"",link:""}),e.push("/")),n(A())}),[t]);var d=function(e,t){var n=t.name,a=t.value;p((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},n,a))}))};return r.a.createElement("div",{className:"new-course-form"},r.a.createElement(_.a,null,r.a.createElement(_.a.Group,{widths:"equal"},r.a.createElement(_.a.Field,{id:"form-input-control-first-name",control:i.a,label:"Course name",placeholder:"Course name",name:"title",onChange:d,value:m.title}),r.a.createElement(_.a.Field,{id:"form-input-control-last-name",control:i.a,label:"From",placeholder:"From",name:"_from",onChange:d,value:m._from})),r.a.createElement(_.a.Field,{id:"form-textarea-control-opinion",control:N.a,label:"Description",placeholder:"Description",name:"desc",onChange:d,value:m.desc}),r.a.createElement(_.a.Field,{id:"form-input-control-error-email",control:i.a,label:"Link",placeholder:"https://",name:"link",onChange:d,value:m.link}),r.a.createElement(_.a.Field,{id:"form-button-control-public",control:T.a,content:"Submit",onClick:function(){var e,t=JSON.stringify(m);if(o)n(function(e,t){return function(n,a){E.a.patch("/api/v1/course/".concat(e,"/"),t,O(a)).then((function(e){n(R({updatecourse:"course updated"})),n({type:"DELETE_COURSE",payload:e.data}),n({type:"POST_COURSE",payload:e.data})})).catch((function(e){return n(I(e.response.data,e.response.status))}))}}(o,t));else{var a=n((e=t,function(t,n){E.a.post("/api/v1/course/",e,O(n)).then((function(e){t(R({postcourse:"course posted"})),t({type:"POST_COURSE",payload:e.data})})).catch((function(e){return t(I(e.response.data,e.response.status))}))}));console.log(a)}}})))}var L=n(349),U=n(353);function G(){var e=Object(g.f)(),t=Object(l.c)((function(e){return e.Comment.comments})),n=Object(l.c)((function(e){return e.Comment.loaded})),o=Object(l.c)((function(e){return e.loginstate.username})),c=Object(l.c)((function(e){return e.Course.courses})),u=Object(l.c)((function(e){return e.Message})),i=Object(l.b)(),m=Object(a.useState)({review:""}),p=Object(s.a)(m,2),d=p[0],f=p[1],h=Object(a.useState)(!0),b=Object(s.a)(h,2),v=b[0],j=b[1],y=Object(g.g)().slug,C=Object(a.useState)({title:"",_from:"",desc:"",id:"",username:"",link:""}),S=Object(s.a)(C,2),M=S[0],N=S[1];Object(a.useEffect)((function(){return E.a.get("/api/v1/course/".concat(y,"/?format=json")).then((function(e){return N(e.data)})),0===c.length?E.a.get("/api/v1/course/".concat(y,"/?format=json")).then((function(e){return N(e.data)})):N(c.find((function(e){return e.slug===y}))),i(function(e){return function(t){E.a.get("/api/v1/comment/?course=".concat(e,"&format=json")).then((function(e){t({type:"GET_COMMENTS",payload:e.data})})).catch((function(e){return t(I(e.response.data,e.response.status))}))}}(y)),function(){i((function(e){e({type:"CLEAR_COMMENTS"})}))}}),[]),Object(a.useEffect)((function(){400===u.status?alert(JSON.stringify(u.msg)):u.deletecourse?e.push("/"):f({review:""}),i(A())}),[u]),Object(a.useEffect)((function(){return n?j(!1):(console.log(n),j(!0)),function(){j(!0)}}),[t]);return r.a.createElement("div",{className:"course-page"},r.a.createElement("h2",null,M.title),r.a.createElement("p",{style:{color:"gray"}},"By: ",M._from),r.a.createElement("p",null,M.desc),r.a.createElement(T.a,{onClick:function(){return window.open(M.link,"_blank")},size:"mini"},"Visit"),o===M.username&&r.a.createElement(T.a,{onClick:function(t){return e.push("/edit/".concat(y))},size:"mini"},"Edit"),o===M.username&&r.a.createElement(T.a,{onClick:function(e){return i(function(e){return function(t,n){E.a.delete("/api/v1/course/".concat(e),O(n)).then((function(e){t(R({deletecourse:"course deleted"})),t({type:"DELETE_COURSE",payload:e.data})})).catch((function(e){return t(I(e.response.data,e.response.status))}))}}(y))},size:"mini"},"Delete"),r.a.createElement(L.a.Group,null,r.a.createElement(U.a,{as:"h3"},"Comments"),r.a.createElement(_.a,null,r.a.createElement(_.a.TextArea,{value:d.review,name:"review",onChange:function(e,t){var n=t.name,a=t.value;f((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},n,a))}))}}),r.a.createElement(_.a.Button,{primary:!0,onClick:function(){var e;i((e={comment:d.review,course:M.slug},function(t,n){E.a.post("/api/v1/comment/",e,O(n)).then((function(e){t(R({postcomment:"comment posted"})),t({type:"POST_COMMENT",payload:e.data})})).catch((function(e){return t(I(e.response.data,e.response.status))}))}))}},"Submit")),v&&r.a.createElement("p",null,"Loading comments..."),t.map((function(e){return r.a.createElement(L.a,{key:e.id},r.a.createElement(L.a.Content,{className:"comment"},r.a.createElement(L.a.Author,{as:"a"},e.username),r.a.createElement(L.a.Metadata,null,r.a.createElement("div",null,new Date(e.datetime).toDateString())),r.a.createElement(L.a.Text,null,e.comment),r.a.createElement(L.a.Actions,null,o===e.username&&r.a.createElement(L.a.Action,{onClick:function(t){var n;i((n=e.id,function(e,t){E.a.delete("/api/v1/comment/".concat(n,"/"),O(t)).then((function(t){e(R({deletecomment:"comment deleted"})),console.log(t.data),e({type:"DELETE_COMMENT",payload:t.data})})).catch((function(t){return e(I(t.response.data,t.response.status))}))}))}},"Delete"))))}))))}var x=function(){var e=Object(l.b)();return Object(a.useEffect)((function(){e((function(e){E.a.get("/api/v1/course/?format=json").then((function(t){e({type:"GET_COURSES",payload:t.data})})).catch((function(t){return e(I(t.response.data,t.response.status))}))}));var t=localStorage.getItem("token"),n={headers:{Authorization:"Token ".concat(t)}};t&&E.a.get("/api/auth/user",n).then((function(n){e(h({token:t,username:n.data.username}))})).catch((function(e){return console.log(e)}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(S.a,null,r.a.createElement(b,null),r.a.createElement(a.Fragment,null,r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:C}),r.a.createElement(g.a,{exact:!0,path:"/login",component:M}),r.a.createElement(g.a,{exact:!0,path:"/post-course",component:D}),r.a.createElement(g.a,{exact:!0,path:"/edit/:slug",component:D}),r.a.createElement(g.a,{exact:!0,path:"/course/:slug",component:G})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(33),F=n(175),P=n(58),z={comments:[]},V={courses:[]},B=Object(J.c)({loginstate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:!1,token:"",username:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Setlogintrue":return{state:!0,token:t.payload.token,username:t.payload.username};case"Setloginfalse":return localStorage.removeItem("token"),{state:!1,token:"",username:""};default:return e}},Course:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COURSES":return Object(k.a)(Object(k.a)({},e),{},{courses:t.payload});case"DELETE_COURSE":return Object(k.a)(Object(k.a)({},e),{},{courses:e.courses.filter((function(e){return e.id!==t.payload.id}))});case"POST_COURSE":case"DELETE_COURSE":return Object(k.a)(Object(k.a)({},e),{},{courses:[].concat(Object(P.a)(e.courses),[t.payload])});default:return e}},Comment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COMMENTS":return Object(k.a)(Object(k.a)({},e),{},{comments:t.payload,loaded:!0});case"DELETE_COMMENT":return Object(k.a)(Object(k.a)({},e),{},{comments:e.comments.filter((function(e){return e.id!==t.payload.id}))});case"POST_COMMENT":return Object(k.a)(Object(k.a)({},e),{},{comments:[].concat(Object(P.a)(e.comments),[t.payload])});case"DELETE_COMMENT":return Object(k.a)(Object(k.a)({},e),{},{comments:[]});case"CLEAR_COMMENTS":return{comments:[]};default:return e}},Message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MESSAGE":case"GET_ERRORS":return t.payload;case"CLEAR_MESSAGE":return"";default:return e}}}),X=[F.a],W=Object(J.e)(B,{},Object(J.d)(J.a.apply(void 0,X),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:W},r.a.createElement(x,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[188,1,2]]]);
//# sourceMappingURL=main.8507428e.chunk.js.map